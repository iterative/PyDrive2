<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex/" /><link rel="search" title="Search" href="../search/" /><link rel="next" title="File management made easy" href="../filemanagement/" /><link rel="prev" title="Quickstart" href="../quickstart/" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.07.18 -->
        <title>OAuth made easy - PyDrive2 1.19.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=613ab9ff" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../"><div class="brand">PyDrive2 1.19.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../">
  
  
  <span class="sidebar-brand-text">PyDrive2 1.19.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search/" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart/">Quickstart</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">OAuth made easy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filemanagement/">File management made easy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filelist/">File listing made easy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fsspec/">fsspec filesystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pydrive2/">pydrive2 package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex/">Index</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/oauth.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="oauth-made-easy">
<h1>OAuth made easy<a class="headerlink" href="#oauth-made-easy" title="Permalink to this heading">¶</a></h1>
<section id="authentication-in-two-lines">
<h2>Authentication in two lines<a class="headerlink" href="#authentication-in-two-lines" title="Permalink to this heading">¶</a></h2>
<p>OAuth2.0 is complex and difficult to start with. To make it more simple,
<em>PyDrive2</em> makes all authentication into just two lines.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pydrive2.auth</span> <span class="kn">import</span> <span class="n">GoogleAuth</span>

<span class="n">gauth</span> <span class="o">=</span> <span class="n">GoogleAuth</span><span class="p">()</span>
<span class="c1"># Create local webserver and auto handles authentication.</span>
<span class="n">gauth</span><span class="o">.</span><span class="n">LocalWebserverAuth</span><span class="p">()</span>

<span class="c1"># Or use the CommandLineAuth(), which provides you with a link to paste</span>
<span class="c1"># into your browser. The site it leads to then provides you with an</span>
<span class="c1"># authentication token which you paste into the command line.</span>
<span class="c1"># Commented out as it is an alternative to the LocalWebserverAuth() above,</span>
<span class="c1"># and someone will just copy-paste the entire thing into their editor.</span>

<span class="c1"># gauth.CommandLineAuth()</span>
</pre></div>
</div>
<p>To make this code work, you need to download the application configurations file
from APIs Console. Take a look at <a class="reference external" href="/PyDrive2/quickstart/#authentication">quickstart</a> for detailed instructions.</p>
<p><a class="reference external" href="/PyDrive2/pydrive2/#pydrive2.auth.GoogleAuth.LocalWebserverAuth">LocalWebserverAuth()</a> is a built-in method of <a class="reference external" href="/PyDrive2/pydrive2/#pydrive2.auth.GoogleAuth">GoogleAuth</a> which sets up
local webserver to automatically receive authentication code from user and
authorizes by itself. You can also use <a class="reference external" href="/PyDrive2/pydrive2/#pydrive.auth.GoogleAuth.CommandLineAuth">CommandLineAuth()</a> which manually
takes code from user at command line.</p>
</section>
<section id="automatic-and-custom-authentication-with-settings-yaml">
<h2>Automatic and custom authentication with <em>settings.yaml</em><a class="headerlink" href="#automatic-and-custom-authentication-with-settings-yaml" title="Permalink to this heading">¶</a></h2>
<p>Read this section if you need a custom authentication flow, <strong>such as silent
authentication on a remote machine</strong>. For an example of such a setup have a look
at <a class="reference internal" href="#sample-settings-yaml">Sample settings.yaml</a>.</p>
<p>OAuth is complicated and it requires a lot of settings. By default,
when you don’t provide any settings, <em>PyDrive</em> will automatically set default
values which works for most of the cases. Here are some default settings.</p>
<ul class="simple">
<li><p>Read client configuration from file <em>client_secrets.json</em></p></li>
<li><p>OAuth scope: <code class="code docutils literal notranslate"><span class="pre">https://www.googleapis.com/auth/drive</span></code></p></li>
<li><p>Don’t save credentials</p></li>
<li><p>Don’t retrieve refresh token</p></li>
</ul>
<p>However, you might want to customize these settings while maintaining two lines
of clean code. If that is the case, you can make <em>settings.yaml</em> file in your
working directory and <em>PyDrive</em> will read it to customize authentication
behavior.</p>
<p>These are all the possible fields of a <em>settings.yaml</em> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client_config_backend</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
<span class="n">client_config_file</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
<span class="n">client_config</span><span class="p">:</span>
  <span class="n">client_id</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">client_secret</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">auth_uri</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">token_uri</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">redirect_uri</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">revoke_uri</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>

<span class="n">service_config</span><span class="p">:</span>
  <span class="n">client_user_email</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">client_json_file_path</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
  <span class="n">client_json_dict</span><span class="p">:</span> <span class="p">{{</span><span class="nb">dict</span><span class="p">}}</span>
  <span class="n">client_json</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>

<span class="n">save_credentials</span><span class="p">:</span> <span class="p">{{</span><span class="nb">bool</span><span class="p">}}</span>
<span class="n">save_credentials_backend</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
<span class="n">save_credentials_file</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>
<span class="n">save_credentials_dict</span><span class="p">:</span> <span class="p">{{</span><span class="nb">dict</span><span class="p">}}</span>
<span class="n">save_credentials_key</span><span class="p">:</span> <span class="p">{{</span><span class="nb">str</span><span class="p">}}</span>

<span class="n">get_refresh_token</span><span class="p">:</span> <span class="p">{{</span><span class="nb">bool</span><span class="p">}}</span>

<span class="n">oauth_scope</span><span class="p">:</span> <span class="p">{{</span><span class="nb">list</span> <span class="n">of</span> <span class="nb">str</span><span class="p">}}</span>
</pre></div>
</div>
<p>Fields explained:</p>
<dl class="field-list simple">
<dt class="field-odd">client_config_backend (str)<span class="colon">:</span></dt>
<dd class="field-odd"><p>From where to read client configuration(API application settings such as client_id and client_secrets) from. Valid values are ‘file’, ‘settings’ and ‘service’. <strong>Default</strong>: ‘file’. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-even">client_config_file (str)<span class="colon">:</span></dt>
<dd class="field-even"><p>When <em>client_config_backend</em> is ‘file’, path to the file containing client configuration. <strong>Default</strong>: ‘client_secrets.json’. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-odd">client_config (dict)<span class="colon">:</span></dt>
<dd class="field-odd"><p>Place holding dictionary for client configuration when <em>client_config_backend</em> is ‘settings’. <strong>Required</strong>: Yes, only if <em>client_config_backend</em> is ‘settings’ and not using <em>service_config</em></p>
</dd>
<dt class="field-even">client_config[‘client_id’] (str)<span class="colon">:</span></dt>
<dd class="field-even"><p>Client ID of the application. <strong>Required</strong>: Yes, only if <em>client_config_backend</em> is ‘settings’</p>
</dd>
<dt class="field-odd">client_config[‘client_secret’] (str)<span class="colon">:</span></dt>
<dd class="field-odd"><p>Client secret of the application. <strong>Required</strong>: Yes, only if <em>client_config_backend</em> is ‘settings’</p>
</dd>
<dt class="field-even">client_config[‘auth_uri’] (str)<span class="colon">:</span></dt>
<dd class="field-even"><p>The authorization server endpoint URI. <strong>Default</strong>: ‘<a class="reference external" href="https://accounts.google.com/o/oauth2/auth">https://accounts.google.com/o/oauth2/auth</a>’. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-odd">client_config[‘token_uri’] (str)<span class="colon">:</span></dt>
<dd class="field-odd"><p>The token server endpoint URI. <strong>Default</strong>: ‘<a class="reference external" href="https://accounts.google.com/o/oauth2/token">https://accounts.google.com/o/oauth2/token</a>’. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-even">client_config[‘redirect_uri’] (str)<span class="colon">:</span></dt>
<dd class="field-even"><p>Redirection endpoint URI. <strong>Default</strong>: ‘<a class="reference external" href="urn:ietf:wg:oauth:2.0:oob">urn:ietf:wg:oauth:2.0:oob</a>’. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-odd">client_config[‘revoke_uri’] (str)<span class="colon">:</span></dt>
<dd class="field-odd"><p>Revoke endpoint URI. <strong>Default</strong>: None. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-even">service_config (dict)<span class="colon">:</span></dt>
<dd class="field-even"><p>Place holding dictionary for client configuration when <em>client_config_backend</em> is ‘service’ or ‘settings’ and using service account. <strong>Required</strong>: Yes, only if <em>client_config_backend</em> is ‘service’ or ‘settings’ and not using <em>client_config</em></p>
</dd>
<dt class="field-odd">service_config[‘client_user_email’] (str)<span class="colon">:</span></dt>
<dd class="field-odd"><p>User email that authority was <a class="reference external" href="https://developers.google.com/admin-sdk/directory/v1/guides/delegation">delegated</a> to. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-even">service_config[‘client_json_file_path’] (str)<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to service account <cite>.json</cite> key file. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-odd">service_config[‘client_json_dict’] (dict)<span class="colon">:</span></dt>
<dd class="field-odd"><p>Service account <cite>.json</cite> key file loaded into a dictionary. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-even">service_config[‘client_json’] (str)<span class="colon">:</span></dt>
<dd class="field-even"><p>Service account <cite>.json</cite> key file loaded into a string. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-odd">save_credentials (bool)<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if you want to save credentials. <strong>Default</strong>: False. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-even">save_credentials_backend (str)<span class="colon">:</span></dt>
<dd class="field-even"><p>Backend to save credentials to. ‘file’ and ‘dictionary’ are the only valid values for now. <strong>Default</strong>: ‘file’. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-odd">save_credentials_file (str)<span class="colon">:</span></dt>
<dd class="field-odd"><p>Destination of credentials file. <strong>Required</strong>: Yes, only if <em>save_credentials_backend</em> is ‘file’.</p>
</dd>
<dt class="field-even">save_credentials_dict (dict)<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict to use for storing credentials. <strong>Required</strong>: Yes, only if <em>save_credentials_backend</em> is ‘dictionary’.</p>
</dd>
<dt class="field-odd">save_credentials_key (str)<span class="colon">:</span></dt>
<dd class="field-odd"><p>Key within the <em>save_credentials_dict</em> to store the credentials in. <strong>Required</strong>: Yes, only if <em>save_credentials_backend</em> is ‘dictionary’.</p>
</dd>
<dt class="field-even">get_refresh_token (bool)<span class="colon">:</span></dt>
<dd class="field-even"><p>True if you want to retrieve refresh token along with access token. <strong>Default</strong>: False. <strong>Required</strong>: No.</p>
</dd>
<dt class="field-odd">oauth_scope (list of str)<span class="colon">:</span></dt>
<dd class="field-odd"><p>OAuth scope to authenticate. <strong>Default</strong>: [’<a class="reference external" href="https://www.googleapis.com/auth/drive">https://www.googleapis.com/auth/drive</a>’]. <strong>Required</strong>: No.</p>
</dd>
</dl>
<section id="sample-settings-yaml">
<h3>Sample <em>settings.yaml</em><a class="headerlink" href="#sample-settings-yaml" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">client_config_backend</span><span class="p">:</span> <span class="n">settings</span>
<span class="n">client_config</span><span class="p">:</span>
  <span class="n">client_id</span><span class="p">:</span> <span class="mf">9637341109347.</span><span class="n">apps</span><span class="o">.</span><span class="n">googleusercontent</span><span class="o">.</span><span class="n">com</span>
  <span class="n">client_secret</span><span class="p">:</span> <span class="n">psDskOoWr1P602PXRTHi</span>

<span class="n">save_credentials</span><span class="p">:</span> <span class="kc">True</span>
<span class="n">save_credentials_backend</span><span class="p">:</span> <span class="n">file</span>
<span class="n">save_credentials_file</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">json</span>

<span class="n">get_refresh_token</span><span class="p">:</span> <span class="kc">True</span>

<span class="n">oauth_scope</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">googleapis</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">drive</span><span class="o">.</span><span class="n">file</span>
  <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">googleapis</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">drive</span><span class="o">.</span><span class="n">install</span>
  <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">googleapis</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">drive</span><span class="o">.</span><span class="n">metadata</span>
</pre></div>
</div>
</section>
</section>
<section id="building-your-own-authentication-flow">
<h2>Building your own authentication flow<a class="headerlink" href="#building-your-own-authentication-flow" title="Permalink to this heading">¶</a></h2>
<p>You might want to build your own authentication flow. For example, you might
want to integrate your existing website with Drive API. In that case, you can
customize an authentication flow as follows:</p>
<ol class="arabic simple">
<li><p>Get authentication Url from <a class="reference external" href="/PyDrive2/pydrive2/#pydrive2.auth.GoogleAuth.GetAuthUrl">GetAuthUrl()</a>.</p></li>
<li><p>Ask users to visit the authentication Url and grant access to your application. Retrieve authentication code manually by user or automatically by building your own oauth2callback.</p></li>
<li><p>Call <a class="reference external" href="/PyDrive2/pydrive2/#pydrive2.auth.GoogleAuth.Auth">Auth(code)</a> with the authentication code you retrieved from step 2.</p></li>
</ol>
<p>Your <em>settings.yaml</em> will work for your customized authentication flow, too.</p>
<p>Here is a sample code for your customized authentication flow</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pydrive2.auth</span> <span class="kn">import</span> <span class="n">GoogleAuth</span>

<span class="n">gauth</span> <span class="o">=</span> <span class="n">GoogleAuth</span><span class="p">()</span>
<span class="n">auth_url</span> <span class="o">=</span> <span class="n">gauth</span><span class="o">.</span><span class="n">GetAuthUrl</span><span class="p">()</span> <span class="c1"># Create authentication url user needs to visit</span>
<span class="n">code</span> <span class="o">=</span> <span class="n">AskUserToVisitLinkAndGiveCode</span><span class="p">(</span><span class="n">auth_url</span><span class="p">)</span> <span class="c1"># Your customized authentication flow</span>
<span class="n">gauth</span><span class="o">.</span><span class="n">Auth</span><span class="p">(</span><span class="n">code</span><span class="p">)</span> <span class="c1"># Authorize and build service from the code</span>
</pre></div>
</div>
</section>
<section id="authentication-with-a-service-account">
<h2>Authentication with a service account<a class="headerlink" href="#authentication-with-a-service-account" title="Permalink to this heading">¶</a></h2>
<p>A <a class="reference external" href="https://developers.google.com/workspace/guides/create-credentials#service-account">Service account</a> is a special type of Google account intended to represent a
non-human user that needs to authenticate and be authorized to access data in
Google APIs.</p>
<p>Typically, service accounts are used in scenarios such as:</p>
<ul class="simple">
<li><p>Running workloads on virtual machines (VMs).</p></li>
<li><p>Running workloads on data centers that call Google APIs.</p></li>
<li><p>Running workloads which are not tied to the lifecycle of a human user.</p></li>
</ul>
<p>If we use OAuth client ID we need to do one manual login into the account with
<a class="reference external" href="/PyDrive2/pydrive2/#pydrive2.auth.GoogleAuth.LocalWebserverAuth">LocalWebserverAuth()</a>. If we use a service account the login is automatic.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pydrive2.auth</span> <span class="kn">import</span> <span class="n">GoogleAuth</span>
<span class="kn">from</span> <span class="nn">pydrive2.drive</span> <span class="kn">import</span> <span class="n">GoogleDrive</span>

<span class="k">def</span> <span class="nf">login_with_service_account</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Google Drive service with a service account.</span>
<span class="sd">    note: for the service account to work, you need to share the folder or</span>
<span class="sd">    files with the service account email.</span>

<span class="sd">    :return: google auth</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Define the settings dict to use a service account</span>
    <span class="c1"># We also can use all options available for the settings dict like</span>
    <span class="c1"># oauth_scope,save_credentials,etc.</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;client_config_backend&quot;</span><span class="p">:</span> <span class="s2">&quot;service&quot;</span><span class="p">,</span>
                <span class="s2">&quot;service_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;client_json_file_path&quot;</span><span class="p">:</span> <span class="s2">&quot;service-secrets.json&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">}</span>
    <span class="c1"># Create instance of GoogleAuth</span>
    <span class="n">gauth</span> <span class="o">=</span> <span class="n">GoogleAuth</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>
    <span class="c1"># Authenticate</span>
    <span class="n">gauth</span><span class="o">.</span><span class="n">ServiceAuth</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">gauth</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../filemanagement/">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">File management made easy</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../quickstart/">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Quickstart</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, JunYoung Gwak, Scott Blevins, Robin Nabel, Google Inc, Iterative Inc
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">OAuth made easy</a><ul>
<li><a class="reference internal" href="#authentication-in-two-lines">Authentication in two lines</a></li>
<li><a class="reference internal" href="#automatic-and-custom-authentication-with-settings-yaml">Automatic and custom authentication with <em>settings.yaml</em></a><ul>
<li><a class="reference internal" href="#sample-settings-yaml">Sample <em>settings.yaml</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-your-own-authentication-flow">Building your own authentication flow</a></li>
<li><a class="reference internal" href="#authentication-with-a-service-account">Authentication with a service account</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=436b7c6f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>